<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chicha IP Proxy - Quick Mirror Guide</title>
  <style>
    body { font-family: Arial, sans-serif; line-height: 1.6; margin: 2rem; color: #1f2933; }
    h1, h2, h3 { color: #0f172a; }
    code, pre { background: #f8fafc; padding: 0.2rem 0.4rem; border-radius: 4px; }
    pre { padding: 1rem; overflow-x: auto; border: 1px solid #e2e8f0; }
    section { margin-bottom: 2rem; }
    .dual { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; }
    .card { border: 1px solid #e2e8f0; border-radius: 6px; padding: 1rem; background: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
  </style>
</head>
<body>
  <h1>Chicha IP Proxy – Practical Notes for Fast TCP Mirrors and WireGuard UDP Relays</h1>
  <p>Short, respectful guidance inspired by Dmitry Likhachev: clear words, no noise, ready-to-run commands for a sysadmin who needs a mirror right now.</p>

  <section class="dual">
    <div class="card">
      <h2>English</h2>
      <p>Use the script below when you need to install from GitHub releases with <code>curl</code>, run a quick TCP site mirror, or pass WireGuard traffic over UDP. Everything is ready for systemd.</p>
      <h3>One-line install + service (Linux)</h3>
      <pre><code>#!/usr/bin/env bash
set -euo pipefail
OS=$(uname -s | tr '[:upper:]' '[:lower:]')
ARCH=$(uname -m)
case "$ARCH" in
  x86_64|amd64) ARCH=amd64 ;;
  aarch64|arm64) ARCH=arm64 ;;
  armv7*|armv6*) ARCH=arm ;;
  *) echo "Unsupported arch: $ARCH" >&2; exit 1 ;;
esac
BASE="https://github.com/matveynator/chicha-ip-proxy/releases/latest/download"
BIN="chicha-ip-proxy-${OS}-${ARCH}"
sudo curl -L "$BASE/$BIN" -o /usr/local/bin/chicha-ip-proxy
sudo chmod +x /usr/local/bin/chicha-ip-proxy
sudo tee /etc/systemd/system/chicha-ip-proxy.service &lt;&lt;'UNIT' >/dev/null
[Unit]
Description=Chicha IP Proxy
After=network.target

[Service]
ExecStart=/usr/local/bin/chicha-ip-proxy \
  -routes "80:203.0.113.10:80" \
  -udp-routes "51820:203.0.113.10:51820" \
  -log /var/log/chicha-ip-proxy.log
Restart=on-failure

[Install]
WantedBy=multi-user.target
UNIT
sudo systemctl daemon-reload
sudo systemctl enable --now chicha-ip-proxy
      </code></pre>
      <p>Replace <code>203.0.113.10</code> with your origin. Add more comma-separated rules to <code>-routes</code> (TCP) or <code>-udp-routes</code> (UDP).</p>

      <h3>Quick run without systemd</h3>
      <ul>
        <li>Mirror a website over TCP: <code>sudo chicha-ip-proxy -routes "80:198.51.100.5:80,443:198.51.100.5:443" -log /var/log/chicha-ip-proxy.log</code></li>
        <li>Pass WireGuard UDP: <code>sudo chicha-ip-proxy -udp-routes "51820:198.51.100.20:51820" -log /var/log/chicha-ip-proxy.log</code></li>
      </ul>
      <p>Logs rotate daily without compression, keeping plain text for quick grepping.</p>
    </div>

    <div class="card">
      <h2>Русский</h2>
      <p>Короткие и понятные шаги: установка из релиза GitHub через <code>curl</code>, запуск зеркала сайта по TCP и проброс WireGuard по UDP. Все готово для systemd.</p>
      <h3>Установка и сервис одной командой (Linux)</h3>
      <pre><code>#!/usr/bin/env bash
set -euo pipefail
OS=$(uname -s | tr '[:upper:]' '[:lower:]')
ARCH=$(uname -m)
case "$ARCH" in
  x86_64|amd64) ARCH=amd64 ;;
  aarch64|arm64) ARCH=arm64 ;;
  armv7*|armv6*) ARCH=arm ;;
  *) echo "Неподдерживаемая архитектура: $ARCH" >&2; exit 1 ;;
esac
BASE="https://github.com/matveynator/chicha-ip-proxy/releases/latest/download"
BIN="chicha-ip-proxy-${OS}-${ARCH}"
sudo curl -L "$BASE/$BIN" -o /usr/local/bin/chicha-ip-proxy
sudo chmod +x /usr/local/bin/chicha-ip-proxy
sudo tee /etc/systemd/system/chicha-ip-proxy.service &lt;&lt;'UNIT' >/dev/null
[Unit]
Description=Chicha IP Proxy
After=network.target

[Service]
ExecStart=/usr/local/bin/chicha-ip-proxy \
  -routes "80:203.0.113.10:80" \
  -udp-routes "51820:203.0.113.10:51820" \
  -log /var/log/chicha-ip-proxy.log
Restart=on-failure

[Install]
WantedBy=multi-user.target
UNIT
sudo systemctl daemon-reload
sudo systemctl enable --now chicha-ip-proxy
      </code></pre>
      <p>Замените <code>203.0.113.10</code> на свой узел. Дополнительно можно добавить порты через запятую в <code>-routes</code> (TCP) и <code>-udp-routes</code> (UDP).</p>

      <h3>Быстрый запуск без systemd</h3>
      <ul>
        <li>Зеркало сайта по TCP: <code>sudo chicha-ip-proxy -routes "80:198.51.100.5:80,443:198.51.100.5:443" -log /var/log/chicha-ip-proxy.log</code></li>
        <li>WireGuard по UDP: <code>sudo chicha-ip-proxy -udp-routes "51820:198.51.100.20:51820" -log /var/log/chicha-ip-proxy.log</code></li>
      </ul>
      <p>Логи ротируются ежедневно без сжатия, остаются в обычном тексте — удобно смотреть и искать.</p>
    </div>
  </section>
</body>
</html>
